<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<script>
		//公用函数
		//log函数
		var log = function() {
		  console.log.apply(console,arguments)
		}
		//测试函数
		var ensure = function(condition, message) {
			if (!condition) {
				console.log(message)
			}	
		}
		//增强的测试函数
		var ensureEqual = function(a, b, message) {
			if (a != b) {
				log(`*** 测试失败， ${a}不等于 ${b} ， ${message}`)
			}
		}


		//1求数组的和
		//var a = 0放在哪里？
		//重点是拿一个数作为累加的初始值
		var sum = function(arr) {
			var a = 0
			for(var i = 0; i < arr.length; i++) {
				var n = arr[i]
				a = a + n
			}
			log("a:",a)
			return a
		}
		var testSum = function() {
			ensure(sum([1,2,3]) === 6,"test1错误")
			ensure(sum([1,2,3]) === 7,"test2错误")
		}
		testSum()


		//2
		//参数是一个只包含数字的array
		//求array的乘积
		//for空格
		var product = function(arr) {
			var a = 1
			for(var i = 0; i < arr.length; i++) {
				var n = arr[i]
				a = a * n
			}
			return a
		}	
		var testProduct = function() {
			ensure(product([1,2,3]) === 6,"product1错误")
			ensure(product([1,2,3]) === 7,"product2错误")
		}
		testProduct()	

		//3
		//返回一个数的绝对值	
		var abs = function(num) {
			if (num > 0) {
				return num
			} else {
				return -num
			}
		}
		var testAbs = function() {
			ensure(abs(-10) === 10,"absc错误")
			ensure(abs(10) === 10,"absc错误")
		}
		testAbs()	
		

		//4
		//参数是一个只包含数字的array
		//求array中所有数字的平均值
		var sum = function(arr) {
			var a = 0
			for(var i = 0; i < arr.length; i++) {
				var n = arr[i]
				a = a + n
			}
			return a
		}		
		var average = function(array) {
			var sumAll = sum(array)
			var length = array.length
			var res = sumAll / length
			return res
		}
		var testAve = function() {
			ensure(average([3,4,5])===4,"average1 false")
			ensure(average([3,6,6])===5,"average2 false")
			ensure(average([3,0,3])===2,"average3 false")
		}
		testAve()	


		//5
		//参数是一个值包含数字的array
		//求array中最小的数字	
		var min = function(array) {
			var a = array[0]
			for (var i = 1; i < array.length; i++) {
				var n = array[i]
				if (n < a) {
					a = n
				}
			}
			return a 
		}
		var testmin = function() {
			ensure(min([3,4,5])===3,"min1 false")
			ensure(min([3,2,5])===2,"min2 false")
			ensure(min([3,4,0])===0,"min3 false")
			ensure(min([-1,4,0])===-1,"min4 false")
		}
		testmin()	


		//6
		/*
		参数是一个数字n
		返回以下序列的结果
		1 - 2 + 3 - 4 + 5 。。。 n 
		 */		
		var sum1 = function(num) {
			var res = 0
			for(var i = 0; i < num + 1; i ++) {
				var n = i
				if (n % 2 == 0) {
					res = res - n
				} else {
					res = res + n
				}
			}
			return res
		}	
		var testensure = function() {
			ensure(sum1(5)===3,"sum1 false")
			ensure(sum1(5)===6,"sum2 false")
		}
		testensure()


		//7
		/*
		参数是一个数字n
		返回以下序列的结果
		1 + 2 - 3 + 4 - 5 。。。 n 
		 */	
		var sum2 = function(num) {
			var res = 1
			for(var i = 2; i < num + 1; i++){
				var n = i
				if (n % 2 == 0) {
					res = res + n					
				} else {
					res = res - n
				}
			}
			return res
		}	
		var testensure = function() {
			ensure(sum2(5)===-1,"sum21 false")
			ensure(sum2(5)===6,"sum22 false")
		}
		testensure()	


		//8
		/*
		实现fac函数
		接受参数n
		返回n的阶乘，1*2*3*4*5...*n
		 */		
		var fac = function(n) {
			var res = 1
			for(var i = 1; i < n + 1; i++) {
				res = res * i
			}
			return res 
		}	
		var testensure = function() {
			ensure(fac(5)===120,"fac false")
			ensure(fac(5)===6,"fac false")
		}
		testensure()	
		
		//9
		/*
		注意 下面几题中的参数op是operator(操作符)的缩写

		实现apply函数
		参数如下
		op是string类型，值是"+" "-" "*" "/"其中之一
		a，b分别是2个数字
		根据op对a，b运算并返回结果(加减乘除)
		 */			
		var apply = function(op, a, b){
			if (op == "+") {
				return a + b
			} else if (op == "-") {
				return a - b
			} else if (op == "*") {
				return a * b
			} else if (op == "/") {
				return a / b
			}
		}
		var testensure = function() {
			ensure(apply("+", 4, 5)===9,"apply false") 
			ensure(apply("+", 4, 5)===10,"apply false")
		}
		testensure()


		//10
		/*
		实现applyList函数
		op是string类型，值是"+" "-" "*" "/"其中之一
		oprands是一个只包含数字的list
		根据op对oprands中的元素进行运算并返回结果
		例如，下面的调用返回-4
		var n = applyList("-",[3, 4, 2, 1])
		log(n)
		结果是4，用第一个数字减去所有的数字
		 */	
		var apply = function(op, a, b){
			if (op == "+") {
				return a + b
			} else if (op == "-") {
				return a - b
			} else if (op == "*") {
				return a * b
			} else if (op == "/") {
				return a / b
			}
		}
		var applyList = function(op, arr){
			var res = arr[0]
			for(var i = 1; i < arr.length; i++){
				var n = arr[i]
				res = apply(op, res, n)
			}
			return res 
		}	
		var testensure = function() {
			ensure(applyList("+",[3, 4, 2, 1])===-4,"applyList1 false")
			ensure(applyList("+",[3, 4, 2, 1])===10,"applyList2 false")
			ensure(applyList("-",[3, 4, 2, 1])===-4,"applyList3 false")
			ensure(applyList("-",[3, 4, 2, 1])===-2,"applyList4 false")
			ensure(applyList("*",[3, 4, 2, 1])===24,"applyList5 false")
			ensure(applyList("*",[3, 4, 2, 1])===-2,"applyList6 false")
			ensure(applyList("/",[12, 3, 2, 1])===2,"applyList7 false")
			ensure(applyList("/",[12, 3, 2, 1])===-2,"applyList8 false")
		}
		testensure()	

		//11
		/*
		实现applyCompare函数
		参数如下
		expression是一个array，包含3个元素
		第一个元素是op，值是"<"">""=="其中之一
		剩下两个元素分别是2个数字
		根据op对数字运算并返回结果（结果为true或者false）
		 */
		var applyCompare = function(array) {
			var operator = array[0]
			if (operator == ">") {
				return array[1] > array[2]
			} else if(operator == "<") {
				return array[1] < array[2]
			} else if(operator == "==") {
				return array[1] == array[2]
			}
		}

		var testensure = function() {
			ensure(applyCompare([">", 3, 2]),"applyCompare1 false")
			ensure(applyCompare([">", 3, 4]),"applyCompare2 false")
			ensure(applyCompare(["<", 3, 4]),"applyCompare3 false")
			ensure(applyCompare(["<", 3, 2]),"applyCompare4 false")
			ensure(applyCompare(["==", 3, 3]),"applyCompare5 false")
			ensure(applyCompare(["==", 3, 4]),"applyCompare6 false")
		}
		testensure()

		//12
		/*
		实现applyOps函数
		参数如下
		expression是一个array
		expression中第一个元素是上面几题的op，其中'+-*\/'就调用作业9的函数，"><=="调用作业10的函数
		根据expression运算并返回结果
		 */
		var apply = function(op, a, b){
			if (op == "+") {
				return a + b
			} else if (op == "-") {
				return a - b
			} else if (op == "*") {
				return a * b
			} else if (op == "/") {
				return a / b
			}
		}
		var applyList = function(op, arr){
			var res = arr[0]
			for(var i = 1; i < arr.length; i++){
				var n = arr[i]
				res = apply(op, res, n)
			}
			return res 
		}	

		var applyCompare = function(array) {
			var operator = array[0]
			if (operator == ">") {
				return array[1] > array[2]
			} else if(operator == "<") {
				return array[1] < array[2]
			} else if(operator == "==") {
				return array[1] == array[2]
			}
		}
		var applyOps = function(array){
			var res = 0
			var operator = array[0]
			if('+-*\/'.includes(operator)){
				var newArr = array.slice(1)
				res = applyList(operator, newArr)
			} else {
				res = applyCompare(array)
			}
			return res 
		}

		var testapplyOps = function() {
			ensure(applyOps([">", 3, 2]),"applyOps1 false")
			ensure(applyOps([">", 3, 2] === false),"applyOps2 false")
			ensure(applyOps(["-", 3, 2, 3, 4]) == -6,"applyOps3 false")
			ensure(applyOps(["-", 3, 2, 3, 4]) == -5,"applyOps4 false")
		}
		testapplyOps()

		//13
		//bushu
		/*
		zfill(1,4)，开头不足补 0 ，返回字符串’0001’
		n 是 int 类型
		width 是 int 类型
		把 n 的位数变成 width 这么长，并在右对齐，不足部分用 0 补足并返回
		具体请看测试, 注意, 返回的是 string 类型
		 */
		var zfill = function(num, widthNum) {
			var res = num
			var numStr = num.toString()
			var numLen = numStr.length
			if (numLen > widthNum) {
				res = num.toString()
			} else {
				for(var i = 0; i < widthNum - numLen; i++){
					res = "0" + res 
				}
			}
			return res
		}
		var test_zfill = function() {
		    ensure(zfill(1, 4) === '0001', 'zfill 测试 1')
		    ensure(zfill(23, 4) === '0023', 'zfill 测试 2')
		    ensure(zfill(12345, 4) === '12345', 'zfill 测试 3')
		    ensure(zfill(169, 5) === '00169', 'zfill 测试 4')
		}
		// 调用测试函数
		test_zfill()



		//14
		/*
		s是string
		width是int
		fillchar是长度为1的字符串，默认为空格" "
		如果s长度小于width，则在末尾用fillchar填充并返回
		否则，原样返回，不做额外处理
		 */
		var ljust = function(s, width, fillchar=' ') {
			var res = s
			var numLen = width
			if (numLen < res.length) {
				return res 
			} else {
				for(var i = 0; i < numLen - res.length + 1; i++){
					res = res + fillchar
				}
			}
			return res			
		}
		var test_ljust = function() {
		    ensure(ljust('gua', 5) === 'gua  ', 'ljust 测试 1')
		    ensure(ljust('guagua', 5) === 'guagua', 'ljust 测试 2')
		    ensure(ljust('gua', 5, '+') === 'gua++', 'ljust 测试 3')
		}
		test_ljust()

		//15
		/*
	    s 是 string
	    width 是 int
	    fillchar 是 长度为 1 的字符串, 默认为空格 ' '

	    如果 s 长度小于 width, 则在开头用 fillchar 填充并返回

	    返回 string 类型
	    */
		var rjust = function(s, width, fillchar=' ') {
			var res = s
			var numLen = width
			if (numLen < res.length) {
				return res 
			} else {
				for(var i = 0; i < numLen - res.length + 1; i++){
					res = fillchar + res 
				}
			}
			return res				
		}
		var test_rjust = function() {
		    ensure(rjust('gua', 5) === '  gua', 'rjust 测试 1')
		    ensure(rjust('guagua', 5) === 'guagua', 'rjust 测试 2')
		    ensure(rjust('gua', 5, '*') === '**gua', 'rjust 测试 3')
		}
		test_rjust()

		//16
		//bushu
		/*
	    s 是 string
	    width 是 int
	    fillchar 是 长度为 1 的字符串, 默认为空格 ' '

	    如果 s 长度小于 width, 则在两边用 fillchar 填充并返回
	    如果 s.length 和 width 互为奇偶, 则无法平均分配两边的 fillchar
	    这种情况下, 让左边的 fillchar 数量小于右边

	    返回 string 类型
	    */
	   	var addStr = function(n, str) {
	   		var res = ""
	   		for(var i = 0; i < n; i++) {
	   			res = res + str
	   		}
	   		return res
	   	}
	   	var center = function(s, width, fillchar=' ') {
	   		var res = ""
	   		var num = (width - s.length) / 2
	   		var left = Math.floor(num)
	   		var right = Math.ceil(num)
	   		var leftStr = addStr(left, fillchar)
	   		var rightStr = addStr(right, fillchar)
	   		res = leftStr + s + rightStr
	   		return res
	   	}
	   	var test_center = function() {
			ensure(center("gua", 5) === " gua ","center 测试1")
			ensure(center("gua", 5,"*") === "*gua*","center 测试2")
			ensure(center("gw", 5) === " gw  ","center 测试3")
			ensure(center("gua", 6) === " gua  ","center 测试4")
			ensure(center("gua", 6) === "gua  ","center 测试5")
		}
		test_center()


		//17
		//bushu	
		//全部字符串才返回true，等价于
		//只要有一个不是空格，返回false	
		/*
	    s 是 string
	    检查 s 中是否只包含空格
	    返回 bool, 如果 s 中包含的只有空格则返回 true, 否则返回 false
	    */
		var is_space = function(s) {
			for(var i = 0; i < s.length; i ++) {
				var n = s[i]
				if (n != " ") {
					return false
				}
			}
			return true
		}

		var test_is_space = function() {
			ensure(is_space("  ") == true, "is_space 测试1")
			ensure(is_space("   ") == true," is_space 测试2")
			ensure(is_space('') == false, "is_space 测试3")
			ensure(is_space("gua")  == false, "is_space 测试4")
			ensure(is_space(" gua")  == false, "is_space 测试5")
		}
		test_is_space()




		//18
	    /*
	    s 是字符串
	    检查 s 中是否只包含数字
	    返回: bool, 如果 s 中包含的只有数字则返回 true, 否则返回 false
	    */
		var is_digit = function(s) {
			var dig = "1234567890"
			for(var i = 0; i < s.length; i++) {
				var n = s[i]
				if(!dig.includes(n)){
					return false
				}
			}
			return true
		}
		var test_is_digit = function() {
			ensure(is_digit("123") == true, "is_digit 测试1")
			ensure(is_digit("0") == true," is_digit 测试2")
			ensure(is_digit('  ') == false, "is_digit 测试3")
			ensure(is_digit("1a1") == false, "is_digit 测试4")
			ensure(is_digit("gua") == false, "is_digit 测试5")
			ensure(is_digit("g11") == false, "is_digit 测试6")
			ensure(is_digit("") == false, "is_digit 测试7")
		}
		test_is_digit()

		//19
		//bushu
		/*
	    s 是 string
	    返回一个「删除了字符串开始的所有空格」的字符串

	    返回 string
	    */
		var strip_left = function(s) {
			/*
			var res 
			if(s.length == 0){
				res = ""
			} else {
				for(var i = 0; i < s.length; i++) {
				var n = s[i]
				if (n != " ") {
					var num = s.indexOf(n)
					res = s.slice(num)
					break
				} else{
					var num = s.length
					res = s.slice(num)
					}
				}
			}
			return res
			 */
			// 
			// 
			var index = 0
			for(var i = 0; i < s.length; i++) {
				log(1)
				var char = s[i]
				if (char != " ") {
					log(12)
					index = i
					break
				}
				//为什么这里可以用index = s.length呢？
				//因为break退出的是整个for循环
				index = s.length
				log(2)
			}
			return s.slice(index)		
		}


		var test_strip_left = function() {
		    ensure(strip_left('  gua') === 'gua', 'strip_left 测试 1')
		    // ensure(strip_left(' gua  ') === 'gua  ', 'strip_left 测试 2')
		    // ensure(strip_left('') === '', 'strip_left 测试 3')
		    // ensure(strip_left('    ') === '', 'strip_left 测试 4')
		}
		test_strip_left()


		//20
		/*
	    s 是 string
	    返回一个「删除了字符串末尾的所有空格」的字符串

	    返回 string
	    */
	   	var strip_left = function(s) {
			var index = 0
			for(var i = 0; i < s.length; i++) {
				var char = s[i]
				if (char != " ") {
					index = i
					break
				}
				index = s.length
			}
			return s.slice(index)		
		}
		var strip_right = function(s) {
			var newS = s.split("").reverse().join("") 
			var res = strip_left(newS)
			return res.split("").reverse().join("") 
		}

		var test_strip_right = function() {
		    ensure(strip_right('  gua') === '  gua', 'strip_right 测试 1')
		    ensure(strip_right(' gua  ') === ' gua', 'strip_right 测试 2')
		    ensure(strip_right('') === '', 'strip_right 测试 3')
		    ensure(strip_right('    ') === '', 'strip_right 测试 4')
		}
		test_strip_right()

		//21
		/*
	    s 是 string
	    返回一个「删除了字符串首尾的所有空格」的字符串

	    返回 string
	    */
	   	var strip_left = function(s) {
			var index = 0
			for(var i = 0; i < s.length; i++) {
				var char = s[i]
				if (char != " ") {
					index = i
					break
				}
				index = s.length
			}
			return s.slice(index)		
		}
		var strip_right = function(s) {
			var newS = s.split("").reverse().join("") 
			var res = strip_left(newS)
			return res.split("").reverse().join("") 
		}
		var strip = function(s) {
			var res = strip_left(s)
			var res1 = strip_right(res)
			return  res1
		}
		var test_strip = function() {
		    ensure(strip('  gua') === 'gua', 'strip 测试 1')
		    ensure(strip(' gua  ') === 'gua', 'strip 测试 2')
		    ensure(strip('') === '', 'strip 测试 3')
		    ensure(strip('    ') === '', 'strip 测试 4')
		}
		test_strip()


		//22
		//bushu
		/*
	    3 个参数 s old new 都是字符串
	    返回一个「将 s 中的 old 字符串替换为 new 字符串」的字符串
	    假设 old 存在并且只出现一次

	    返回 string
	    */
	   	var finIndex = function(s, old) {
	   		var oldLen = old.length
	   		for(var i = 0; i < s.length; i++) {
	   			if (s.slice(i, i + oldLen) == old) {
	   				return i
	   			}
	   		}
	   	}
		var replace = function(s, old, newString) {
			var index = finIndex(s, old)
			var left = s.slice(0, index)
			var main = newString
			var right = s.slice(index + old.length)
			return left + main + right
		}
		
		var test_replace = function() {
		    ensure(replace('hello, world', 'world', 'gua') === 'hello, gua', 'replace 测试 1')
		    ensure(replace('hello', 'world', 'gua') === 'hello', 'replace 测试 2')
		    ensure(replace('hello', 'll', 'gua') === 'heguao', 'replace 测试 3')
		}
		test_replace()
	</script>
</body>
</html>=